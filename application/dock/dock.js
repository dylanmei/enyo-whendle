(function() {  var dock = {    name: "Dock",    kind: "VFlexBox",    components: [      { kind: 'SlippyMap', name: 'map' },      { kind: 'Dimmer', name: 'dimmer', maximum: 0.8,        onChanged: 'dimmerHandler', onChanging: 'dimmerHandler'      },      { name: 'clock', className: 'clock', components: [        { name: 'time', className: 'time' },        { name: 'date', className: 'date' }      ]},      { kind: 'Preferences', name: 'preferences', onLoad: 'preferencesHandler' }    ],    create: function() {      this.inherited(arguments);      _.observe('clock:tick',        _.bind(on_clock_tick, this));      _.defer(Timekeeping.tick);      this.time_formatter = new enyo.g11n.DateFmt({time:'short'});      this.date_formatter = new enyo.g11n.DateFmt({format:'EEEE, MMMM d'});      enyo.setAllowedOrientation("up");    },    rendered: function() {      this.inherited(arguments);      var node = this.hasNode(),          latitude = 37.6,          longitude = 0;      this.$.map        .zoom(2)        .pan(latitude, longitude)        .size(node.offsetWidth, node.offsetHeight);    },    preferencesHandler: function() {      var dimness = this.$.preferences.getDockDimness();      if (dimness || dimness == 0)        this.$.dimmer.setPosition(dimness);    },    clickHandler: function(sender, e) {      var dimmer = this.$.dimmer;      if (!dimmer.hasClass('dimmer-show-slider'))        dimmer.addClass('dimmer-show-slider');      defer_hiding_the_slider.call(this);    },    dimmerHandler: function(sender, value) {      defer_hiding_the_slider.call(this);    }  };  function on_clock_tick(e) {    if (e.declination !== undefined)      this.$.map.time(e.now, e.declination);    var local = e.now      .add((e.offset).minutes);    this.$.time.setContent(      this.time_formatter.format(local)    );    this.$.date.setContent(      this.date_formatter.format(local)    );  }  function defer_hiding_the_slider() {    var self = this, dimmer = this.$.dimmer;    if (this.timer) clearTimeout(this.timer);    this.timer = setTimeout(function() {      self.$.preferences.setDockDimness(        dimmer.position      );      dimmer.addClass('dimmer-hide-slider');      dimmer.removeClass('dimmer-show-slider');      delete self.timer;    }, (5).seconds);  }  enyo.kind(dock);})();