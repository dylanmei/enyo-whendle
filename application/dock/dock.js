(function() {  var dock = {    name: "Dock",    kind: "VFlexBox",    components: [      { kind: 'SlippyMap', name: 'map' },      { kind: 'Dimmer', name: 'dimmer', maximum: 0.8,        onChanged: 'dimmerHandler', onChanging: 'dimmerHandler'      },      { name: 'clock', className: 'clock' }    ],    create: function() {      this.inherited(arguments);      _.observe('clock:tick', _.bind(on_clock_tick, this));      _.defer(Timekeeping.tick);    },    rendered: function() {      this.inherited(arguments);      var node = this.hasNode(),          latitude = 37.6,          longitude = 0;      this.$.map        .zoom(2)        .pan(latitude, longitude)        .size(node.offsetWidth, node.offsetHeight);    },    clickHandler: function(sender, e) {      var dimmer = this.$.dimmer;      if (!dimmer.hasClass('dimmer-show-slider'))        dimmer.addClass('dimmer-show-slider');      this.defer_hiding_the_slider();    },    dimmerHandler: function(sender, value) {      this.defer_hiding_the_slider();    },    defer_hiding_the_slider: function() {      var self = this, dimmer = this.$.dimmer;      if (this.timer) clearTimeout(this.timer);      this.timer = setTimeout(function() {        dimmer.addClass('dimmer-hide-slider');        dimmer.removeClass('dimmer-show-slider');        delete self.timer;      }, (5).seconds);    }  };  function on_clock_tick(e) {    if (e.declination !== undefined)      this.$.map.time(e.now, e.declination);    var local = e.now      .add((e.offset).minutes);    this.$.clock.setContent(local.hh12);  }  enyo.kind(dock);})();