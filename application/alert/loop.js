Loop = (function() {  function Loop(src) {    this.audio = new Audio(src);    this.endedHandler = _.bind(this.trackEnding, this);  }  _.extend(Loop.prototype, {    play: function() {      this.audio.play();      this.audio.addEventListener(        'ended', this.endedHandler, false);    },    trackEnding: function() {      if (this.endedHandler) _.delay(_.bind(this.repeat, this), 500);    },    repeat: function() {      if (this.endedHandler) {        this.audio.load();        this.audio.play();      }    },    stop: function() {      this.audio.pause();      if (this.endedHandler)        this.audio.removeEventListener('ended', this.endedHandler);      delete this.endedHandler;    }  });  return Loop;})();