Service = (function() {  function Service(uri) {    this.uri = uri;    this.bridge = window.PalmSystem      ? new PalmServiceBridge() : undefined;  }  Service.prototype.invoke = function(method, params) {    var p = new Promise();    var bridge = this.bridge;    bridge.onservicecallback = function(response) {      response = parse_response(response);      response.returnValue        ? p.resolve(response)        : p.reject(response);    };    bridge.call(invocation_address(this.uri, method),      enyo.json.stringify(params || {}));    return p;  };  function parse_response(response) {    return enyo.json.parse(response || "{}");  }  function invocation_address(service, method) {    return (service[service.length - 1] != '/')      ? service + '/' + method : service + method;  }  return Service;})();